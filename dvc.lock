setup_env:
  cmd: ./scripts/setup.sh 1
  deps:
  - path: ./scripts/setup.sh
    md5: 3a3e76685baf84c237412ba9e3a4f0c5
dl_quail:
  cmd: ./src/etl/dl_quail.sh
  deps:
  - path: src/etl/dl_quail.sh
    md5: 35c895bd0b066481c8f7fba6dd57a0cb
  outs:
  - path: data/quail/dev.json
    md5: 710c954716143d6d3c8c2ef2044f5c0c
  - path: data/quail/dev_answers.json
    md5: 1665e633ee7aa0183a45a3749e4e061b
  - path: data/quail/eval.py
    md5: cab53a1ed0c7248b036be788fa60ec3c
  - path: data/quail/train.json
    md5: 5409940d9b8479dc51fe56c9b5607344
  - path: data/quail/train_answers.json
    md5: c1b17d1e9bb8bbce4b28c253e5167001
dl_models:
  cmd: python ./src/etl/dl_models.py -m bert-large-uncased bert-base-uncased bert-base-multilingual-cased
    --overwrite
  deps:
  - path: src/etl/dl_models.py
    md5: c2ca665ea793afe968fff649f0e04717
  outs:
  - path: data/models/bert-base-multilingual-cased
    md5: 670fbb9b45bd8600510f362bd8f3d12e.dir
  - path: data/models/bert-base-uncased
    md5: f2ad4af37921a985dc27c650ee39d8d8.dir
  - path: data/models/bert-large-uncased
    md5: defb07df7011fe80af3a1e6bc843eb2b.dir
tr_quail_train_to_race:
  cmd: src/etl/preprocess_quail_to_race.py data/quail/train.json data/quail/train_answers.json
    -o data/quail_race_fmt/train.json
  deps:
  - path: data/quail/train.json
    md5: 5409940d9b8479dc51fe56c9b5607344
  - path: data/quail/train_answers.json
    md5: c1b17d1e9bb8bbce4b28c253e5167001
  - path: src/etl/preprocess_quail_to_race.py
    md5: d85a3aa72f907adfdef52155b94d55b5
  outs:
  - path: data/quail_race_fmt/train.json
    md5: 6c67d6a9e3c054cf471ef467fbf23e26
tr_quail_dev_to_race:
  cmd: src/etl/preprocess_quail_to_race.py data/quail/dev.json data/quail/dev_answers.json
    -o data/quail_race_fmt/dev.json
  deps:
  - path: data/quail/dev.json
    md5: 710c954716143d6d3c8c2ef2044f5c0c
  - path: data/quail/dev_answers.json
    md5: 1665e633ee7aa0183a45a3749e4e061b
  - path: src/etl/preprocess_quail_to_race.py
    md5: d85a3aa72f907adfdef52155b94d55b5
  outs:
  - path: data/quail_race_fmt/dev.json
    md5: b2573225520d6ae103b7b1f899ebd433
60d988dee30ae86536ee58ea2777c69747316251fb6a4e9d2623be788f4a6384:
  cmd: ./src/processing/run.sh data/specs/60d988dee30ae86536ee58ea2777c69747316251fb6a4e9d2623be788f4a6384_experiment.json
  deps:
  - path: data/models/bert-base-uncased
    md5: f2ad4af37921a985dc27c650ee39d8d8.dir
  - path: data/quail/dev_race_fmt.json
    md5: b2573225520d6ae103b7b1f899ebd433
  - path: data/quail/train_race_fmt.json
    md5: 6c67d6a9e3c054cf471ef467fbf23e26
  - path: src/processing/run.sh
    md5: 64fb281369c593c6cffa775027afb04c
  params:
    data/specs/60d988dee30ae86536ee58ea2777c69747316251fb6a4e9d2623be788f4a6384_experiment.json:
      params.do_eval: true
      params.do_train: true
      params.fp16: true
      params.fp16_opt_level: O1
      params.gradient_accumulation_steps: 8
      params.learning_rate: '5e-05'
      params.max_seq_length: 484
      params.meta: bert-train
      params.model_type: bert
      params.num_train_epochs: 2
      params.task_name: generic
  outs:
  - path: data/metrics/60d988dee30ae86536ee58ea2777c69747316251fb6a4e9d2623be788f4a6384/eval_metrics.json
    md5: c4c7d994bf2a16a6d73a4ac91f8d31f4
  - path: data/models/60d988dee30ae86536ee58ea2777c69747316251fb6a4e9d2623be788f4a6384/config.json
    md5: fda1d82a923cf7ffd8b9da484296692f
  - path: data/models/60d988dee30ae86536ee58ea2777c69747316251fb6a4e9d2623be788f4a6384/pytorch_model.bin
    md5: 40074d3d92250cf96f0b5281452d9bad
  - path: data/models/60d988dee30ae86536ee58ea2777c69747316251fb6a4e9d2623be788f4a6384/special_tokens_map.json
    md5: 8b3fb1023167bb4ab9d70708eb05f6ec
  - path: data/models/60d988dee30ae86536ee58ea2777c69747316251fb6a4e9d2623be788f4a6384/tokenizer_config.json
    md5: acaa1589c694bf6f6c146b3bac976f67
  - path: data/models/60d988dee30ae86536ee58ea2777c69747316251fb6a4e9d2623be788f4a6384/training_args.bin
    md5: 819cc6ff7220f79736bcc0090f54f45c
  - path: data/models/60d988dee30ae86536ee58ea2777c69747316251fb6a4e9d2623be788f4a6384/vocab.txt
    md5: 64800d5d8528ce344256daf115d4965e
  - path: data/results/60d988dee30ae86536ee58ea2777c69747316251fb6a4e9d2623be788f4a6384/eval_nbest_predictions.json
    md5: 967895fe7e66ae66fa404106b49169b7
  - path: data/results/60d988dee30ae86536ee58ea2777c69747316251fb6a4e9d2623be788f4a6384/eval_predictions.json
    md5: fc8fb53b15b13f6d02915f620ccae9b2
4819225caddd2f92c878079d1b17e675eeb5d704de41996605ad6cdb7afc70df:
  cmd: ./src/processing/run.sh data/specs/4819225caddd2f92c878079d1b17e675eeb5d704de41996605ad6cdb7afc70df_experiment.json
  deps:
  - path: data/models/bert-base-uncased
    md5: f2ad4af37921a985dc27c650ee39d8d8.dir
  - path: data/quail/dev_race_fmt.json
    md5: b2573225520d6ae103b7b1f899ebd433
  - path: data/quail/train_race_fmt.json
    md5: 6c67d6a9e3c054cf471ef467fbf23e26
  - path: src/processing/run.sh
    md5: 64fb281369c593c6cffa775027afb04c
  params:
    data/specs/4819225caddd2f92c878079d1b17e675eeb5d704de41996605ad6cdb7afc70df_experiment.json:
      params.do_eval: true
      params.do_train: true
      params.fp16: true
      params.fp16_opt_level: O1
      params.gradient_accumulation_steps: 8
      params.learning_rate: '5e-05'
      params.max_seq_length: 484
      params.meta: multibert-train
      params.model_type: bert
      params.num_train_epochs: 2
      params.task_name: generic
  outs:
  - path: data/metrics/4819225caddd2f92c878079d1b17e675eeb5d704de41996605ad6cdb7afc70df/eval_metrics.json
    md5: 3c0e781dbd46d7049321f331e888210a
  - path: data/models/4819225caddd2f92c878079d1b17e675eeb5d704de41996605ad6cdb7afc70df/config.json
    md5: 26625e8e71f502488984908b8043b368
  - path: data/models/4819225caddd2f92c878079d1b17e675eeb5d704de41996605ad6cdb7afc70df/pytorch_model.bin
    md5: 0c8810c2a465065fa44d136918d51928
  - path: data/models/4819225caddd2f92c878079d1b17e675eeb5d704de41996605ad6cdb7afc70df/special_tokens_map.json
    md5: 8b3fb1023167bb4ab9d70708eb05f6ec
  - path: data/models/4819225caddd2f92c878079d1b17e675eeb5d704de41996605ad6cdb7afc70df/tokenizer_config.json
    md5: bd2095a6f1895712b38f5c742a06e4cb
  - path: data/models/4819225caddd2f92c878079d1b17e675eeb5d704de41996605ad6cdb7afc70df/training_args.bin
    md5: e01be806622db5b133e2358efe0ab7f6
  - path: data/models/4819225caddd2f92c878079d1b17e675eeb5d704de41996605ad6cdb7afc70df/vocab.txt
    md5: d9d865138d17f1958502ed060ecfeeb6
  - path: data/results/4819225caddd2f92c878079d1b17e675eeb5d704de41996605ad6cdb7afc70df/eval_nbest_predictions.json
    md5: 0a92d28f6d4e774cd093f1321b5d68d8
  - path: data/results/4819225caddd2f92c878079d1b17e675eeb5d704de41996605ad6cdb7afc70df/eval_predictions.json
    md5: 7fa1e9a1736a94dfadc22bce7dbce4d1
